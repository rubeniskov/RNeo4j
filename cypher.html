<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Retrieve Cypher Query Results as a Data Frame</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for cypher"><tr><td>cypher</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Retrieve Cypher Query Results as a Data Frame</h2>

<h3>Description</h3>

<p>Retrieve Cypher query results as a data frame.</p>


<h3>Usage</h3>

<pre>
cypher(graph, query, ...)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>graph</code></td>
<td>
<p>A graph object.</p>
</td></tr>
<tr valign="top"><td><code>query</code></td>
<td>
<p>A Cypher query in the form of a string.</p>
</td></tr>
<tr valign="top"><td><code>...</code></td>
<td>
<p>Optional parameters to pass to the query in the form key = value, if applicable.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If returning data, you can only query for tabular results. That is, you can't return node or relationship entities. See <code>getNodes</code> and <code>getRels</code> for returning entities.
</p>
<p>You can send Cypher queries without any return values (i.e., a Cypher query without the word <code>RETURN</code> in it).
</p>


<h3>Value</h3>

<p>A data frame. Cypher queries returning no results will return NULL.
</p>


<h3>Examples</h3>

<pre>
graph = startGraph("http://localhost:7474/db/data/")
clear(graph)

alice = createNode(graph, "Person", name = "Alice", age = 23)
bob = createNode(graph, "Person", name = "Bob", age = 22)
charles = createNode(graph, "Person", name = "Charles", age = 25)
david = createNode(graph, "Person", name = "David", age = 20)

createRel(alice, "KNOWS", bob)
createRel(alice, "KNOWS", charles)
createRel(charles, "KNOWS", david)

# Query without parameters.
cypher(graph, "MATCH n RETURN n.name, n.age")

# Query with parameters.
cypher(graph, 
	   "MATCH n WHERE n.age &lt; {age} RETURN n.name, n.age", 
	   age = 24)

# Query with array parameter.
names = c("Alice", "Charles")
cypher(graph,
	   "MATCH n WHERE n.name IN {names} RETURN n.name, n.age",
	   names = names)
     
# Query that returns a collection.
# The 'friends' column will have lists as values.
df = cypher(graph, "MATCH (n)-[:KNOWS]-(m) RETURN n.name, COLLECT(m.name) AS friends, COUNT(m) AS num_friends")
sapply(df, class)
df$friends

# Query that doesn't return anything.
cypher(graph, 
	     "MATCH n SET n.born = {year} - n.age REMOVE n.age",
	     year = 2014)

cypher(graph, 'MATCH n RETURN n.name, n.born')
</pre>


</body></html>
